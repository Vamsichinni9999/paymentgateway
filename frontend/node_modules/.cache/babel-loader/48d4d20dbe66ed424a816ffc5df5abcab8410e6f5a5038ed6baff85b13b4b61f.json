{"ast":null,"code":"import React,{useEffect,useState}from'react';import SummaryApi from'../common';import{toast}from'react-toastify';import moment from'moment';import{MdModeEdit}from\"react-icons/md\";import ChangeUserRole from'../components/ChangeUserRole';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const AllUsers=()=>{const[allUser,setAllUsers]=useState([]);const[openUpdateRole,setOpenUpdateRole]=useState(false);const[updateUserDetails,setUpdateUserDetails]=useState({email:\"\",name:\"\",role:\"\",_id:\"\"});const fetchAllUsers=async()=>{const fetchData=await fetch(SummaryApi.allUser.url,{method:SummaryApi.allUser.method,credentials:'include'});const dataResponse=await fetchData.json();if(dataResponse.success){setAllUsers(dataResponse.data);}if(dataResponse.error){toast.error(dataResponse.message);}};useEffect(()=>{fetchAllUsers();},[]);return/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white pb-4\",children:[/*#__PURE__*/_jsxs(\"table\",{className:\"w-full userTable\",children:[/*#__PURE__*/_jsx(\"thead\",{children:/*#__PURE__*/_jsxs(\"tr\",{className:\"bg-black text-white\",children:[/*#__PURE__*/_jsx(\"th\",{children:\"Sr.\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Name\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Email\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Role\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Created Date\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Action\"})]})}),/*#__PURE__*/_jsx(\"tbody\",{className:\"\",children:allUser.map((el,index)=>{return/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"td\",{children:index+1}),/*#__PURE__*/_jsx(\"td\",{children:el===null||el===void 0?void 0:el.name}),/*#__PURE__*/_jsx(\"td\",{children:el===null||el===void 0?void 0:el.email}),/*#__PURE__*/_jsx(\"td\",{children:el===null||el===void 0?void 0:el.role}),/*#__PURE__*/_jsx(\"td\",{children:moment(el===null||el===void 0?void 0:el.createdAt).format('LL')}),/*#__PURE__*/_jsx(\"td\",{children:/*#__PURE__*/_jsx(\"button\",{className:\"bg-green-100 p-2 rounded-full cursor-pointer hover:bg-green-500 hover:text-white\",onClick:()=>{setUpdateUserDetails(el);setOpenUpdateRole(true);},children:/*#__PURE__*/_jsx(MdModeEdit,{})})})]});})})]}),openUpdateRole&&/*#__PURE__*/_jsx(ChangeUserRole,{onClose:()=>setOpenUpdateRole(false),name:updateUserDetails.name,email:updateUserDetails.email,role:updateUserDetails.role,userId:updateUserDetails._id,callFunc:fetchAllUsers})]});};export default AllUsers;","map":{"version":3,"names":["React","useEffect","useState","SummaryApi","toast","moment","MdModeEdit","ChangeUserRole","jsx","_jsx","jsxs","_jsxs","AllUsers","allUser","setAllUsers","openUpdateRole","setOpenUpdateRole","updateUserDetails","setUpdateUserDetails","email","name","role","_id","fetchAllUsers","fetchData","fetch","url","method","credentials","dataResponse","json","success","data","error","message","className","children","map","el","index","createdAt","format","onClick","onClose","userId","callFunc"],"sources":["C:/Users/hp/Desktop/MERN1/frontend/src/pages/AllUsers.js"],"sourcesContent":["import React, { useEffect, useState } from 'react'\r\nimport SummaryApi from '../common'\r\nimport { toast } from 'react-toastify'\r\nimport moment from 'moment'\r\nimport { MdModeEdit } from \"react-icons/md\";\r\nimport ChangeUserRole from '../components/ChangeUserRole';\r\n\r\nconst AllUsers = () => {\r\n    const [allUser,setAllUsers] = useState([])\r\n    const [openUpdateRole,setOpenUpdateRole] = useState(false)\r\n    const [updateUserDetails,setUpdateUserDetails] = useState({\r\n        email : \"\",\r\n        name : \"\",\r\n        role : \"\",\r\n        _id  : \"\"\r\n    })\r\n\r\n    const fetchAllUsers = async() =>{\r\n        const fetchData = await fetch(SummaryApi.allUser.url,{\r\n            method : SummaryApi.allUser.method,\r\n            credentials : 'include'\r\n        })\r\n\r\n        const dataResponse = await fetchData.json()\r\n\r\n        if(dataResponse.success){\r\n            setAllUsers(dataResponse.data)\r\n        }\r\n\r\n        if(dataResponse.error){\r\n            toast.error(dataResponse.message)\r\n        }\r\n\r\n    }\r\n\r\n    useEffect(()=>{\r\n        fetchAllUsers()\r\n    },[])\r\n\r\n  return (\r\n    <div className='bg-white pb-4'>\r\n        <table className='w-full userTable'>\r\n            <thead>\r\n                <tr className='bg-black text-white'>\r\n                    <th>Sr.</th>\r\n                    <th>Name</th>\r\n                    <th>Email</th>\r\n                    <th>Role</th>\r\n                    <th>Created Date</th>\r\n                    <th>Action</th>\r\n                </tr>\r\n            </thead>\r\n            <tbody className=''>\r\n                {\r\n                    allUser.map((el,index) => {\r\n                        return(\r\n                            <tr>\r\n                                <td>{index+1}</td>\r\n                                <td>{el?.name}</td>\r\n                                <td>{el?.email}</td>\r\n                                <td>{el?.role}</td>\r\n                                <td>{moment(el?.createdAt).format('LL')}</td>\r\n                                <td>\r\n                                    <button className='bg-green-100 p-2 rounded-full cursor-pointer hover:bg-green-500 hover:text-white' \r\n                                    onClick={()=>{\r\n                                        setUpdateUserDetails(el)\r\n                                        setOpenUpdateRole(true)\r\n\r\n                                    }}\r\n                                    >\r\n                                        <MdModeEdit/>\r\n                                    </button>\r\n                                </td>\r\n                            </tr>\r\n                        )\r\n                    })\r\n                }\r\n            </tbody>\r\n        </table>\r\n\r\n        {\r\n            openUpdateRole && (\r\n                <ChangeUserRole \r\n                    onClose={()=>setOpenUpdateRole(false)} \r\n                    name={updateUserDetails.name}\r\n                    email={updateUserDetails.email}\r\n                    role={updateUserDetails.role}\r\n                    userId={updateUserDetails._id}\r\n                    callFunc={fetchAllUsers}\r\n                />\r\n            )      \r\n        }\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default AllUsers"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}