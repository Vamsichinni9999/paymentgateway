{"ast":null,"code":"import React,{useEffect,useState}from'react';import{useLocation,useNavigate,useParams}from'react-router-dom';import productCategory from'../helpers/productCategory';import VerticalCard from'../components/VerticalCard';import SummaryApi from'../common';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const CategoryProduct=()=>{const[data,setData]=useState([]);const navigate=useNavigate();const[loading,setLoading]=useState(false);const location=useLocation();const urlSearch=new URLSearchParams(location.search);const urlCategoryListinArray=urlSearch.getAll(\"category\");const urlCategoryListObject={};urlCategoryListinArray.forEach(el=>{urlCategoryListObject[el]=true;});const[selectCategory,setSelectCategory]=useState(urlCategoryListObject);const[filterCategoryList,setFilterCategoryList]=useState([]);const[sortBy,setSortBy]=useState(\"\");const fetchData=async()=>{const response=await fetch(SummaryApi.filterProduct.url,{method:SummaryApi.filterProduct.method,headers:{\"content-type\":\"application/json\"},body:JSON.stringify({category:filterCategoryList})});const dataResponse=await response.json();setData((dataResponse===null||dataResponse===void 0?void 0:dataResponse.data)||[]);};const handleSelectCategory=e=>{const{name,value,checked}=e.target;setSelectCategory(preve=>{return{...preve,[value]:checked};});};useEffect(()=>{fetchData();},[filterCategoryList]);useEffect(()=>{const arrayOfCategory=Object.keys(selectCategory).map(categoryKeyName=>{if(selectCategory[categoryKeyName]){return categoryKeyName;}return null;}).filter(el=>el);setFilterCategoryList(arrayOfCategory);//format for url change when change on the checkbox\nconst urlFormat=arrayOfCategory.map((el,index)=>{if(arrayOfCategory.length-1===index){return\"category=\".concat(el);}return\"category=\".concat(el,\"&&\");});navigate(\"/product-category?\"+urlFormat.join(\"\"));},[selectCategory]);const handleOnChangeSortBy=e=>{const{value}=e.target;setSortBy(value);if(value==='asc'){setData(preve=>preve.sort((a,b)=>a.sellingPrice-b.sellingPrice));}if(value==='dsc'){setData(preve=>preve.sort((a,b)=>b.sellingPrice-a.sellingPrice));}};useEffect(()=>{},[sortBy]);return/*#__PURE__*/_jsx(\"div\",{className:\"container mx-auto p-4\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"hidden lg:grid grid-cols-[200px,1fr]\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white p-2 min-h-[calc(100vh-120px)] overflow-y-scroll\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"text-base uppercase font-medium text-slate-500 border-b pb-1 border-slate-300\",children:\"Sort by\"}),/*#__PURE__*/_jsxs(\"form\",{className:\"text-sm flex flex-col gap-2 py-2\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center gap-3\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"radio\",name:\"sortBy\",checked:sortBy==='asc',onChange:handleOnChangeSortBy,value:\"asc\"}),/*#__PURE__*/_jsx(\"label\",{children:\"Price - Low to High\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center gap-3\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"radio\",name:\"sortBy\",checked:sortBy==='dsc',onChange:handleOnChangeSortBy,value:\"dsc\"}),/*#__PURE__*/_jsx(\"label\",{children:\"Price - High to Low\"})]})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"text-base uppercase font-medium text-slate-500 border-b pb-1 border-slate-300\",children:\"Category\"}),/*#__PURE__*/_jsx(\"form\",{className:\"text-sm flex flex-col gap-2 py-2\",children:productCategory.map((categoryName,index)=>{return/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center gap-3\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"checkbox\",name:\"category\",checked:selectCategory[categoryName===null||categoryName===void 0?void 0:categoryName.value],value:categoryName===null||categoryName===void 0?void 0:categoryName.value,id:categoryName===null||categoryName===void 0?void 0:categoryName.value,onChange:handleSelectCategory}),/*#__PURE__*/_jsx(\"label\",{htmlFor:categoryName===null||categoryName===void 0?void 0:categoryName.value,children:categoryName===null||categoryName===void 0?void 0:categoryName.label})]});})})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"px-4\",children:[/*#__PURE__*/_jsxs(\"p\",{className:\"font-medium text-slate-800 text-lg my-2\",children:[\"Search Results : \",data.length]}),/*#__PURE__*/_jsx(\"div\",{className:\"min-h-[calc(100vh-120px)] overflow-y-scroll max-h-[calc(100vh-120px)]\",children:data.length!==0&&!loading&&/*#__PURE__*/_jsx(VerticalCard,{data:data,loading:loading})})]})]})});};export default CategoryProduct;","map":{"version":3,"names":["React","useEffect","useState","useLocation","useNavigate","useParams","productCategory","VerticalCard","SummaryApi","jsx","_jsx","jsxs","_jsxs","CategoryProduct","data","setData","navigate","loading","setLoading","location","urlSearch","URLSearchParams","search","urlCategoryListinArray","getAll","urlCategoryListObject","forEach","el","selectCategory","setSelectCategory","filterCategoryList","setFilterCategoryList","sortBy","setSortBy","fetchData","response","fetch","filterProduct","url","method","headers","body","JSON","stringify","category","dataResponse","json","handleSelectCategory","e","name","value","checked","target","preve","arrayOfCategory","Object","keys","map","categoryKeyName","filter","urlFormat","index","length","concat","join","handleOnChangeSortBy","sort","a","b","sellingPrice","className","children","type","onChange","categoryName","id","htmlFor","label"],"sources":["C:/Users/hp/Desktop/MERN1/frontend/src/pages/CategoryProduct.js"],"sourcesContent":["import React, { useEffect, useState } from 'react'\r\nimport { useLocation, useNavigate, useParams } from 'react-router-dom'\r\nimport productCategory from '../helpers/productCategory'\r\nimport VerticalCard from '../components/VerticalCard'\r\nimport SummaryApi from '../common'\r\n\r\nconst CategoryProduct = () => {\r\n    const [data,setData] = useState([])\r\n    const navigate = useNavigate()\r\n    const [loading,setLoading] = useState(false)\r\n    const location = useLocation()\r\n    const urlSearch = new URLSearchParams(location.search)\r\n    const urlCategoryListinArray = urlSearch.getAll(\"category\")\r\n\r\n    const urlCategoryListObject = {}\r\n    urlCategoryListinArray.forEach(el =>{\r\n      urlCategoryListObject[el] = true\r\n    })\r\n\r\n    const [selectCategory,setSelectCategory] = useState(urlCategoryListObject)\r\n    const [filterCategoryList,setFilterCategoryList] = useState([])\r\n\r\n    const [sortBy,setSortBy] = useState(\"\")\r\n\r\n    const fetchData = async()=>{\r\n      const response = await fetch(SummaryApi.filterProduct.url,{\r\n        method : SummaryApi.filterProduct.method,\r\n        headers : {\r\n          \"content-type\" : \"application/json\"\r\n        },\r\n        body : JSON.stringify({\r\n          category : filterCategoryList\r\n        })\r\n      })\r\n\r\n      const dataResponse = await response.json()\r\n      setData(dataResponse?.data || [])\r\n    }\r\n\r\n    const handleSelectCategory = (e) =>{\r\n      const {name , value, checked} =  e.target\r\n\r\n      setSelectCategory((preve)=>{\r\n        return{\r\n          ...preve,\r\n          [value] : checked\r\n        }\r\n      })\r\n    }\r\n\r\n    useEffect(()=>{\r\n      fetchData()\r\n    },[filterCategoryList])\r\n\r\n    useEffect(()=>{\r\n      const arrayOfCategory = Object.keys(selectCategory).map(categoryKeyName =>{\r\n        if(selectCategory[categoryKeyName]){\r\n          return categoryKeyName\r\n        }\r\n        return null\r\n      }).filter(el => el)\r\n\r\n      setFilterCategoryList(arrayOfCategory)\r\n\r\n      //format for url change when change on the checkbox\r\n      const urlFormat = arrayOfCategory.map((el,index) => {\r\n        if((arrayOfCategory.length - 1 ) === index  ){\r\n          return `category=${el}`\r\n        }\r\n        return `category=${el}&&`\r\n      })\r\n\r\n      navigate(\"/product-category?\"+urlFormat.join(\"\"))\r\n    },[selectCategory])\r\n\r\n\r\n    const handleOnChangeSortBy = (e)=>{\r\n      const { value } = e.target\r\n\r\n      setSortBy(value)\r\n\r\n      if(value === 'asc'){\r\n        setData(preve => preve.sort((a,b)=>a.sellingPrice - b.sellingPrice))\r\n      }\r\n\r\n      if(value === 'dsc'){\r\n        setData(preve => preve.sort((a,b)=>b.sellingPrice - a.sellingPrice))\r\n      }\r\n    }\r\n\r\n    useEffect(()=>{\r\n\r\n    },[sortBy])\r\n    \r\n  return (\r\n    <div className='container mx-auto p-4'>\r\n\r\n       {/***desktop version */}\r\n       <div className='hidden lg:grid grid-cols-[200px,1fr]'>\r\n           {/***left side */}\r\n           <div className='bg-white p-2 min-h-[calc(100vh-120px)] overflow-y-scroll'>\r\n                {/**sort by */}\r\n                <div className=''>\r\n                    <h3 className='text-base uppercase font-medium text-slate-500 border-b pb-1 border-slate-300'>Sort by</h3>\r\n\r\n                    <form className='text-sm flex flex-col gap-2 py-2'>\r\n                        <div className='flex items-center gap-3'>\r\n                          <input type='radio' name='sortBy' checked={sortBy === 'asc'} onChange={handleOnChangeSortBy} value={\"asc\"}/>\r\n                          <label>Price - Low to High</label>\r\n                        </div>\r\n\r\n                        <div className='flex items-center gap-3'>\r\n                          <input type='radio' name='sortBy' checked={sortBy === 'dsc'} onChange={handleOnChangeSortBy} value={\"dsc\"}/>\r\n                          <label>Price - High to Low</label>\r\n                        </div>\r\n                    </form>\r\n                </div>\r\n\r\n\r\n                {/**filter by */}\r\n                <div className=''>\r\n                    <h3 className='text-base uppercase font-medium text-slate-500 border-b pb-1 border-slate-300'>Category</h3>\r\n\r\n                    <form className='text-sm flex flex-col gap-2 py-2'>\r\n                        {\r\n                          productCategory.map((categoryName,index)=>{\r\n                            return(\r\n                              <div className='flex items-center gap-3'>\r\n                                 <input type='checkbox' name={\"category\"} checked={selectCategory[categoryName?.value]} value={categoryName?.value} id={categoryName?.value} onChange={handleSelectCategory} />\r\n                                 <label htmlFor={categoryName?.value}>{categoryName?.label}</label>\r\n                              </div>\r\n                            )\r\n                          })\r\n                        }\r\n                    </form>\r\n                </div>\r\n\r\n\r\n           </div>\r\n\r\n\r\n            {/***right side ( product ) */}\r\n            <div className='px-4'>\r\n              <p className='font-medium text-slate-800 text-lg my-2'>Search Results : {data.length}</p>\r\n\r\n             <div className='min-h-[calc(100vh-120px)] overflow-y-scroll max-h-[calc(100vh-120px)]'>\r\n              {\r\n                  data.length !== 0 && !loading && (\r\n                    <VerticalCard data={data} loading={loading}/>\r\n                  )\r\n              }\r\n             </div>\r\n            </div>\r\n       </div>\r\n       \r\n    </div>\r\n  )\r\n}\r\n\r\nexport default CategoryProduct"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}