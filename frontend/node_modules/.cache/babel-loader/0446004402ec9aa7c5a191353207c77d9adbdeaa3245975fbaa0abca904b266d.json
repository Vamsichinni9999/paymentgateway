{"ast":null,"code":"import React,{useContext,useState}from'react';import Logo from'./Logo';import{GrSearch}from\"react-icons/gr\";import{FaRegCircleUser}from\"react-icons/fa6\";import{FaShoppingCart}from\"react-icons/fa\";import{Link,useLocation,useNavigate}from'react-router-dom';import{useDispatch,useSelector}from'react-redux';import SummaryApi from'../common';import{toast}from'react-toastify';import{setUserDetails}from'../store/userSlice';import ROLE from'../common/role';import Context from'../context';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const Header=()=>{const user=useSelector(state=>{var _state$user;return state===null||state===void 0?void 0:(_state$user=state.user)===null||_state$user===void 0?void 0:_state$user.user;});const dispatch=useDispatch();const[menuDisplay,setMenuDisplay]=useState(false);const context=useContext(Context);const navigate=useNavigate();const searchInput=useLocation();const URLSearch=new URLSearchParams(searchInput===null||searchInput===void 0?void 0:searchInput.search);const searchQuery=URLSearch.getAll(\"q\");const[search,setSearch]=useState(searchQuery);const handleLogout=async()=>{const fetchData=await fetch(SummaryApi.logout_user.url,{method:SummaryApi.logout_user.method,credentials:'include'});const data=await fetchData.json();if(data.success){toast.success(data.message);dispatch(setUserDetails(null));navigate(\"/\");}if(data.error){toast.error(data.message);}};const handleSearch=e=>{const{value}=e.target;setSearch(value);if(value){navigate(\"/search?q=\".concat(value));}else{navigate(\"/search\");}};return/*#__PURE__*/_jsx(\"header\",{className:\"h-16 shadow-md bg-white fixed w-full z-40\",children:/*#__PURE__*/_jsxs(\"div\",{className:\" h-full container mx-auto flex items-center px-4 justify-between\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"\",children:/*#__PURE__*/_jsx(Link,{to:\"/\",children:/*#__PURE__*/_jsx(Logo,{w:90,h:50})})}),/*#__PURE__*/_jsxs(\"div\",{className:\"hidden lg:flex items-center w-full justify-between max-w-sm border rounded-full focus-within:shadow pl-2\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"text\",placeholder:\"search product here...\",className:\"w-full outline-none\",onChange:handleSearch,value:search}),/*#__PURE__*/_jsx(\"div\",{className:\"text-lg min-w-[50px] h-8 bg-red-600 flex items-center justify-center rounded-r-full text-white\",children:/*#__PURE__*/_jsx(GrSearch,{})})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center gap-7\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"relative flex justify-center\",children:[(user===null||user===void 0?void 0:user._id)&&/*#__PURE__*/_jsx(\"div\",{className:\"text-3xl cursor-pointer relative flex justify-center\",onClick:()=>setMenuDisplay(preve=>!preve),children:user!==null&&user!==void 0&&user.profilePic?/*#__PURE__*/_jsx(\"img\",{src:user===null||user===void 0?void 0:user.profilePic,className:\"w-10 h-10 rounded-full\",alt:user===null||user===void 0?void 0:user.name}):/*#__PURE__*/_jsx(FaRegCircleUser,{})}),menuDisplay&&/*#__PURE__*/_jsx(\"div\",{className:\"absolute bg-white bottom-0 top-11 h-fit p-2 shadow-lg rounded\",children:/*#__PURE__*/_jsx(\"nav\",{children:(user===null||user===void 0?void 0:user.role)===ROLE.ADMIN&&/*#__PURE__*/_jsx(Link,{to:\"/admin-panel/all-products\",className:\"whitespace-nowrap hidden md:block hover:bg-slate-100 p-2\",onClick:()=>setMenuDisplay(preve=>!preve),children:\"Admin Panel\"})})})]}),(user===null||user===void 0?void 0:user._id)&&/*#__PURE__*/_jsxs(Link,{to:\"/cart\",className:\"text-2xl relative\",children:[/*#__PURE__*/_jsx(\"span\",{children:/*#__PURE__*/_jsx(FaShoppingCart,{})}),/*#__PURE__*/_jsx(\"div\",{className:\"bg-red-600 text-white w-5 h-5 rounded-full p-1 flex items-center justify-center absolute -top-2 -right-3\",children:/*#__PURE__*/_jsx(\"p\",{className:\"text-sm\",children:context===null||context===void 0?void 0:context.cartProductCount})})]}),/*#__PURE__*/_jsx(\"div\",{children:user!==null&&user!==void 0&&user._id?/*#__PURE__*/_jsx(\"button\",{onClick:handleLogout,className:\"px-3 py-1 rounded-full text-white bg-red-600 hover:bg-red-700\",children:\"Logout\"}):/*#__PURE__*/_jsx(Link,{to:\"/login\",className:\"px-3 py-1 rounded-full text-white bg-red-600 hover:bg-red-700\",children:\"Login\"})})]})]})});};export default Header;","map":{"version":3,"names":["React","useContext","useState","Logo","GrSearch","FaRegCircleUser","FaShoppingCart","Link","useLocation","useNavigate","useDispatch","useSelector","SummaryApi","toast","setUserDetails","ROLE","Context","jsx","_jsx","jsxs","_jsxs","Header","user","state","_state$user","dispatch","menuDisplay","setMenuDisplay","context","navigate","searchInput","URLSearch","URLSearchParams","search","searchQuery","getAll","setSearch","handleLogout","fetchData","fetch","logout_user","url","method","credentials","data","json","success","message","error","handleSearch","e","value","target","concat","className","children","to","w","h","type","placeholder","onChange","_id","onClick","preve","profilePic","src","alt","name","role","ADMIN","cartProductCount"],"sources":["C:/Users/hp/Desktop/MERN1/frontend/src/components/Header.js"],"sourcesContent":["import React, { useContext, useState } from 'react'\r\nimport Logo from './Logo'\r\nimport { GrSearch } from \"react-icons/gr\";\r\nimport { FaRegCircleUser } from \"react-icons/fa6\";\r\nimport { FaShoppingCart } from \"react-icons/fa\";\r\nimport { Link, useLocation, useNavigate } from 'react-router-dom';\r\nimport { useDispatch, useSelector } from 'react-redux';\r\nimport SummaryApi from '../common';\r\nimport { toast } from 'react-toastify'\r\nimport { setUserDetails } from '../store/userSlice';\r\nimport ROLE from '../common/role';\r\nimport Context from '../context';\r\n\r\nconst Header = () => {\r\n  const user = useSelector(state => state?.user?.user)\r\n  const dispatch = useDispatch()\r\n  const [menuDisplay,setMenuDisplay] = useState(false)\r\n  const context = useContext(Context)\r\n  const navigate = useNavigate()\r\n  const searchInput = useLocation()\r\n  const URLSearch = new URLSearchParams(searchInput?.search)\r\n  const searchQuery = URLSearch.getAll(\"q\")\r\n  const [search,setSearch] = useState(searchQuery)\r\n\r\n  const handleLogout = async() => {\r\n    const fetchData = await fetch(SummaryApi.logout_user.url,{\r\n      method : SummaryApi.logout_user.method,\r\n      credentials : 'include'\r\n    })\r\n\r\n    const data = await fetchData.json()\r\n\r\n    if(data.success){\r\n      toast.success(data.message)\r\n      dispatch(setUserDetails(null))\r\n      navigate(\"/\")\r\n    }\r\n\r\n    if(data.error){\r\n      toast.error(data.message)\r\n    }\r\n\r\n  }\r\n\r\n  const handleSearch = (e)=>{\r\n    const { value } = e.target\r\n    setSearch(value)\r\n\r\n    if(value){\r\n      navigate(`/search?q=${value}`)\r\n    }else{\r\n      navigate(\"/search\")\r\n    }\r\n  }\r\n  return (\r\n    <header className='h-16 shadow-md bg-white fixed w-full z-40'>\r\n      <div className=' h-full container mx-auto flex items-center px-4 justify-between'>\r\n            <div className=''>\r\n                <Link to={\"/\"}>\r\n                    <Logo w={90} h={50}/>\r\n                </Link>\r\n            </div>\r\n\r\n            <div className='hidden lg:flex items-center w-full justify-between max-w-sm border rounded-full focus-within:shadow pl-2'>\r\n                <input type='text' placeholder='search product here...' className='w-full outline-none' onChange={handleSearch} value={search}/>\r\n                <div className='text-lg min-w-[50px] h-8 bg-red-600 flex items-center justify-center rounded-r-full text-white'>\r\n                  <GrSearch />\r\n                </div>\r\n            </div>\r\n\r\n\r\n            <div className='flex items-center gap-7'>\r\n                \r\n                <div className='relative flex justify-center'>\r\n\r\n                  {\r\n                    user?._id && (\r\n                      <div className='text-3xl cursor-pointer relative flex justify-center' onClick={()=>setMenuDisplay(preve => !preve)}>\r\n                        {\r\n                          user?.profilePic ? (\r\n                            <img src={user?.profilePic} className='w-10 h-10 rounded-full' alt={user?.name} />\r\n                          ) : (\r\n                            <FaRegCircleUser/>\r\n                          )\r\n                        }\r\n                      </div>\r\n                    )\r\n                  }\r\n                  \r\n                  \r\n                  {\r\n                    menuDisplay && (\r\n                      <div className='absolute bg-white bottom-0 top-11 h-fit p-2 shadow-lg rounded' >\r\n                        <nav>\r\n                          {\r\n                            user?.role === ROLE.ADMIN && (\r\n                              <Link to={\"/admin-panel/all-products\"} className='whitespace-nowrap hidden md:block hover:bg-slate-100 p-2' onClick={()=>setMenuDisplay(preve => !preve)}>Admin Panel</Link>\r\n                            )\r\n                          }\r\n                         \r\n                        </nav>\r\n                      </div>\r\n                    )\r\n                  }\r\n                 \r\n                </div>\r\n\r\n                  {\r\n                     user?._id && (\r\n                      <Link to={\"/cart\"} className='text-2xl relative'>\r\n                          <span><FaShoppingCart/></span>\r\n      \r\n                          <div className='bg-red-600 text-white w-5 h-5 rounded-full p-1 flex items-center justify-center absolute -top-2 -right-3'>\r\n                              <p className='text-sm'>{context?.cartProductCount}</p>\r\n                          </div>\r\n                      </Link>\r\n                      )\r\n                  }\r\n              \r\n\r\n\r\n                <div>\r\n                  {\r\n                    user?._id  ? (\r\n                      <button onClick={handleLogout} className='px-3 py-1 rounded-full text-white bg-red-600 hover:bg-red-700'>Logout</button>\r\n                    )\r\n                    : (\r\n                    <Link to={\"/login\"} className='px-3 py-1 rounded-full text-white bg-red-600 hover:bg-red-700'>Login</Link>\r\n                    )\r\n                  }\r\n                    \r\n                </div>\r\n\r\n            </div>\r\n\r\n      </div>\r\n    </header>\r\n  )\r\n}\r\n\r\nexport default Header"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}